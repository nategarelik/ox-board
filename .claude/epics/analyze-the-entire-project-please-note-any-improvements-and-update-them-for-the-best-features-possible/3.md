---
name: Audio Engine Core - Initialize Tone.js, implement dual-deck playbook
status: open
created: 2025-09-13T20:56:48Z
updated: 2025-09-13T21:15:00Z
github: https://github.com/nategarelik/ox-board/issues/3
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Audio Engine Core - Initialize Tone.js, implement dual-deck playback

## Description
Build the complete audio engine using Tone.js 15.0.4 with dual-deck architecture, professional mixer, and effects chain. This system must provide <20ms audio latency and support all professional DJ controls including pitch, EQ, filters, and crossfading.

## Acceptance Criteria
- [ ] Tone.js AudioContext initialized with 48kHz sample rate, 128 sample buffer
- [ ] Dual deck system (Deck A & B) with independent audio sources
- [ ] 4-channel mixer with crossfader and individual channel controls
- [ ] 3-band EQ per deck (Low: 20-250Hz, Mid: 250-4kHz, High: 4k-20kHz) with ±26dB range
- [ ] Variable pitch control ±8% (0.92x - 1.08x playback rate)
- [ ] Master limiter and dynamics processing
- [ ] Audio latency measured <20ms from input to output
- [ ] Support for multiple audio formats (MP3, WAV, FLAC)
- [ ] Memory-efficient audio buffer management

## Technical Details
- **Implementation approach**: Tone.js with Web Audio API, modular audio graph architecture
- **Key files affected**:
  - `/app/lib/audio/engine.ts` - Main audio engine class
  - `/app/lib/audio/mixer.ts` - Mixing algorithms and crossfader
  - `/app/store/audioStore.ts` - Zustand state management
  - `/app/hooks/useAudioContext.ts` - Audio context management
  - `/app/components/DJ/DeckA.tsx` - Deck A controls
  - `/app/components/DJ/DeckB.tsx` - Deck B controls
  - `/app/components/DJ/Mixer.tsx` - Mixer interface
- **Audio graph design**: Source → Gain → EQ → Filter → Pitch → Output routing
- **Performance targets**: <40% CPU usage, <500MB memory, no audio dropouts
- **Buffer management**: Streaming for large files, pre-loading for samples

## Dependencies
- [ ] Tone.js 15.0.4 installed and configured
- [ ] Web Audio API browser support confirmed
- [ ] Audio file access and loading system
- [ ] Zustand store setup for audio state
- [ ] Performance monitoring tools

## Effort Estimate
- Size: L
- Hours: 14-18
- Parallel: true

## Definition of Done
- [ ] Complete audio engine implemented with dual-deck architecture
- [ ] All mixer controls functional (crossfader, EQ, gain, filters)
- [ ] Pitch control working with ±8% range
- [ ] Audio latency tested and confirmed <20ms
- [ ] Unit tests for all audio processing functions
- [ ] Integration tests with sample audio files
- [ ] Memory usage stays under 500MB during operation
- [ ] No audio glitches or dropouts during 30-minute test session
- [ ] Code reviewed and performance optimized
- [ ] Audio store integrated with React components