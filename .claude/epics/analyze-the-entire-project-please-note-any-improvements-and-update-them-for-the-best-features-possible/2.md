---
name: Gesture Detection Setup - Integrate MediaPipe, create base gesture recognizer
status: open
created: 2025-09-13T20:56:48Z
updated: 2025-09-13T21:15:00Z
github: https://github.com/nategarelik/ox-board/issues/2
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Gesture Detection Setup - Integrate MediaPipe, create base gesture recognizer

## Description
Implement the complete MediaPipe hand tracking system with camera access and basic gesture recognition. This forms the core input mechanism for the OX Board DJ application, enabling hands-free control of DJ functions through computer vision.

## Acceptance Criteria
- [ ] MediaPipe Hands integration with proper configuration (maxNumHands: 2, modelComplexity: 1)
- [ ] Camera access with 1280x720 resolution at 60 FPS
- [ ] Real-time hand landmark detection with >90% accuracy
- [ ] Basic gesture recognition for two-hand distance (crossfader control)
- [ ] Visual overlay showing detected hand landmarks
- [ ] Gesture smoothing to reduce jitter (<5% variance)
- [ ] Performance maintains 60 FPS during continuous tracking
- [ ] Error handling for camera permissions and MediaPipe loading

## Technical Details
- **Implementation approach**: Use MediaPipe Hands 0.4.1675469404 with camera_utils
- **Key files affected**:
  - `/app/components/Camera/CameraFeed.tsx` - Main camera component
  - `/app/components/Camera/HandOverlay.tsx` - Visual hand landmarks
  - `/app/lib/gesture/detector.ts` - MediaPipe wrapper
  - `/app/lib/gesture/smoothing.ts` - Kalman filter implementation
  - `/app/hooks/useCamera.ts` - Camera access hook
  - `/app/hooks/useGestures.ts` - Gesture detection hook
- **MediaPipe configuration**: CDN loading from jsdelivr, selfieMode enabled, detection confidence 0.7
- **Camera settings**: User-facing camera, 60 FPS target, proper CORS headers
- **Gesture processing**: Real-time landmark processing with coordinate normalization

## Dependencies
- [ ] Next.js 15.0.3 setup complete
- [ ] TypeScript configuration
- [ ] MediaPipe dependencies installed (@mediapipe/hands, @mediapipe/camera_utils)
- [ ] Proper CORS headers configured in next.config.js
- [ ] Camera permissions in browser

## Effort Estimate
- Size: L
- Hours: 12-16
- Parallel: true

## Definition of Done
- [ ] Code implemented with full MediaPipe integration
- [ ] Unit tests for gesture detection accuracy
- [ ] Camera component renders with live feed
- [ ] Hand landmarks visible as overlay
- [ ] Two-hand distance gesture mapped to crossfader (0-1 range)
- [ ] Performance tests confirm 60 FPS maintenance
- [ ] Error scenarios handled gracefully
- [ ] Code reviewed and follows project standards
- [ ] Integration tests with audio engine prepared